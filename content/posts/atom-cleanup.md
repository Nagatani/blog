---
title: "Atomのメンテナンスでやったこと"
date: 2018-08-13T14:23:58+09:00
tags: [ "Atom", "apm", "maintenance" ]
draft: false
---

Atomって言ってもいろいろあるけど、テキストエディタの[Atom](https://atom.io/)の話。

新しいプログラミング言語の開発環境を構築する際に、いつも使っているAtomのパッケージにも、「language-〇〇」とか「AutoComplete〇〇」などのパッケージを追加している。
でも、ちょっと使ってみてnot for meだったりで消したり、違うものをまた試してみたりを繰り返していると、パッケージ周りでエラーが発生してしまうことが稀によくある。

で、今回、消したはずのパッケージなのに、エラーがずっと残ってしまう現象が発生してしまった。
エラーログ残していなかったのを今更後悔しているんだけど、エラーメッセージを見ていろいろ調べてみてもそのパッケージはすでに消去済みで、原因を追っかけようにも追っかけられない状況だったりすることがある。

そんなときにはapm使うと良い。
apmはAtom Package Managerの略だと思う。

Mac版Atomだと、メニューバーにある「Atom」→「シェルコマンドをインストール」で使えるようになったと思うが記憶は定かでない。

全部紹介するのはめんどいので、メンテナンスで使うやつに留める。

## キャッシュの削除
以下のコマンドでキャッシュの削除等ができる。

```bash
$ cd ~/.atom
$ apm clean
```

`apm clean` は、どうやら内部的には、`npm cache clean` のような機能を呼んでいるっぽい挙動をしているので、cdでディレクトリを`.atom`に変更せずにホームディレクトリとかでやるとコマンドが全然終わらないっぽい。

## 重複しているnode_modulesの削除

```bash
$ apm dedupe
```

無駄に重複してしまっているnode_modulesのなんやかんやを再構築してくれる。

## パッケージのアップデート

```bash
$ apm update
```

もしインストール済みのパッケージにアップデートがある場合、以下のメッセージが出る。

```
Would you like to install these updates? (yes)
```

アップデートしてよければ、そのままenterキーでOK。

## パッケージのリビルド

```bash
$ apm rebuild
```

インストール済みのパッケージをリビルドしてくれる。

## その他まとめて

```bash
# apmのヘルプ表示
$ apm -h
# インストール済みパッケージ一覧
$ apm ls
# パッケージインストール
$ apm install パッケージ名
# パッケージ有効化
$ apm enable パッケージ名
# パッケージ無効化
$ apm disable パッケージ名
# パッケージアンインストール
$ apm uninstall パッケージ名
```

この辺知っておけばほぼほぼ問題なさそうかなー。

以上です。
